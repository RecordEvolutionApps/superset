name: test
layout:
  - w: 3
    h: 4
    x: 0
    y: 0
    id: 7
  - w: 4
    h: 3
    x: 3
    y: 0
    id: 0
  - w: 5
    h: 3
    x: 7
    y: 0
    id: 2
  - w: 9
    h: 3
    x: 3
    y: 3
    id: 1
  - w: 3
    h: 2
    x: 0
    y: 4
    id: 4
  - w: 7
    h: 4
    x: 0
    y: 6
    id: 8
  - w: 5
    h: 4
    x: 7
    y: 6
    id: 5
  - w: 12
    h: 4
    x: 0
    y: 10
    id: 6
widgets:
  - package_name: widget-gauge
    version: 1.5.33
    chartdata:
      dataseries:
        - label: $str:Temperature
          unit: $str:°C
          valueColor: $str:#233543
          sections:
            - $num:-20
            - $num:20
            - $num:80
            - $num:120
          backgroundColors:
            - $str:#aac8a7
            - $str:#f1c27b
            - $str:#ff9b9b
          averageLatest: $num:1
          data:
            tableRef:
              bufferSize: 30
              tablename: sensordata
              format:
                value: temp1
                pivot: devname
    layout_id: 0
  - package_name: widget-linechart
    version: 1.4.15
    chartdata:
      settings:
        timeseries: $bool:true
        yAxisLabel: $str:Temperature
        xAxisLabel: $str:Time
      dataseries:
        - label: $str:Temperature
          type: $str:line
          showLine: $bool:true
          chartName: $str:test#pivot#
          radius: $num:2
          pointStyle: $str:rectRounded
          backgroundColor: $str:#e15656
          borderColor: $str:#ff9b9b
          borderWidth: $num:2
          fill: $bool:false
          data:
            tableRef:
              tablename: sensordata
              bufferSize: 100
              format:
                x: tsp
                y: temp1
        - label: $str:Humidity
          type: $str:line
          showLine: $bool:true
          chartName: $str:test#pivot#
          radius: $num:2
          pointStyle: $str:rectRounded
          backgroundColor: $str:#5898d0
          borderColor: $str:#96caf8
          borderWidth: $num:2
          fill: $bool:false
          data:
            tableRef:
              tablename: sensordata
              bufferSize: 100
              format:
                x: tsp
                y: humidity
    layout_id: 1
  - package_name: widget-doughnut
    version: 1.4.25
    chartdata:
      settings:
        title: $str:Doughnut Chart
        columnLayout: $bool:false
      dataseries:
        - label: $str:Doughnut 1
          cutout: $str:20%
          averageLatest: $num:1
          sections:
            tableRef:
              tablename: sensordata
              bufferSize: 200
              format:
                - name: $str:Devices Online
                  pivot: devname
                  value: temp1
                  color: $str:#aac8a7
                - name: $str:Devices Offline
                  pivot: devname
                  value: humidity
                  color: $str:#ff9b9b
                - name: $str:Devices Unknown
                  pivot: devname
                  value: $num:4
                  color: $str:#96caf8
    layout_id: 2
  - package_name: widget-value
    version: 1.0.25
    chartdata:
      settings:
        title: "$str:"
        subTitle: "$str:"
      dataseries:
        - label: $str:Temperature
          unit: $str:°C
          valueColor: $str:black
          labelColor: $str:black
          averageLatest: $num:1
          data:
            tableRef:
              tablename: sensordata
              bufferSize: 30
              format:
                value: temp1
                pivot: devname
        - label: $str:Humidity
          unit: $str:%
          valueColor: $str:black
          labelColor: $str:black
          averageLatest: $num:1
          data:
            tableRef:
              tablename: sensordata
              bufferSize: 30
              format:
                value: humidity
                pivot: devname
    layout_id: 4
  - package_name: widget-barchart
    version: 1.4.13
    chartdata:
      settings:
        horizontal: $bool:true
      dataseries:
        - label: $str:Bar Series
          stack: $str:max
          backgroundColor: $str:#aac8a7
          borderColor: $str:#6e9a69
          borderWidth: $num:2
          borderRadius: $num:4
          data:
            tableRef:
              tablename: myagg
              bufferSize: 30
              format:
                x: $str:MaxTemp
                y: max_temp
                pivot: devname
        - label: $str:Min Temp
          stack: $str:min
          backgroundColor: $str:#f1c27b
          borderColor: $str:#dd9e46
          borderWidth: $num:2
          borderRadius: $num:4
          data:
            tableRef:
              tablename: myagg
              bufferSize: 30
              format:
                x: $str:MinTemp
                y: min_temp
                pivot: devname
        - label: $str:Avg Temp
          stack: $str:avg
          backgroundColor: $str:#ff9b9b
          borderColor: $str:#e15656
          borderWidth: $num:2
          borderRadius: $num:4
          data:
            tableRef:
              tablename: myagg
              bufferSize: 30
              format:
                x: $str:AvgTemp
                y: avg_temp
                pivot: devname
    layout_id: 5
  - package_name: widget-mapbox
    version: 1.4.20
    chartdata:
      settings:
        title: $str:Map Example
        style: $str:light-v11
        showLegend: $bool:true
        follow: $bool:false
      dataseries:
        - label: $str:Circles
          type: $str:circle
          color: $str:#96caf8
          latestValues: $num:10
          config:
            circle:
              circle-blur: $num:0.2
              circle-opacity: $num:0.8
            symbol:
              text-color: $str:black
              text-size: $num:14
          data:
            tableRef:
              tablename: sensordata
              bufferSize: 30
              format:
                lon: $num:8.68417
                lat: $num:50.11552
                value: temp1
                pivot: devname
        - label: $str:Tracks
          type: $str:line
          color: $str:#aac8a7
          latestValues: $num:40
          config:
            line:
              line-width: $num:2
            symbol:
              icon-image: $str:car-front
              icon-size: $num:1
          data:
            tableRef:
              tablename: geodata
              bufferSize: 150
              format:
                lon: lon
                lat: lat
                pivot: devname
    layout_id: 6
  - package_name: widget-image
    version: 1.0.8
    chartdata:
      title:
        text:
          valueRef:
            tablename: sensordata
            column: devname
      imageLink: $str:https://res.cloudinary.com/dotw7ar1m/image/upload/v1705171827/markope._self-contained_full_view_of_an_industrial_machine_mode_a9355fbe-d5b5-4ffb-abf3-8027d4edd5fb.png
    layout_id: 7
  - package_name: widget-table
    version: 1.0.11
    chartdata:
      settings:
        headerFontSize: $str:16px
        headerBackground: $str:#ddd
        rowHeight: $str:40px
      columns:
        - header: $str:Image
          width: $str:120px
          type: $str:image
          values:
            tableRef:
              tablename: sensordata
              bufferSize: 20
              format: $str:https://storage.googleapis.com/reswarm-images/mir-200.png
        - header: $str:Device Name
          width: $str:220px
          type: $str:string
          fontSize: $str:14px
          values:
            tableRef:
              tablename: sensordata
              bufferSize: 20
              format: devname
        - header: $str:Timestamp
          width: $str:80px
          fontSize: $str:14px
          type: $str:string
          values:
            tableRef:
              tablename: sensordata
              bufferSize: 20
              format: tsp
        - header: $str:Temperatur
          columnWidth: $str:80px
          type: $str:number
          fontWeight: $num:400
          precision: $num:2
          values:
            tableRef:
              tablename: sensordata
              bufferSize: 20
              format: temp1
        - header: $str:Humidity
          columnWidth: $str:80px
          type: $str:number
          fontWeight: $num:400
          precision: $num:2
          values:
            tableRef:
              tablename: sensordata
              bufferSize: 20
              format: humidity
        - header: $str:Bool
          width: $str:20px
          type: $str:boolean
          values:
            tableRef:
              tablename: sensordata
              bufferSize: 20
              format: $bool:bool
        - header: $str:Link
          width: $str:120px
          type: $str:button
          label: $str:Details
          values:
            tableRef:
              tablename: sensordata
              bufferSize: 20
              format: $str:https://google.com
    layout_id: 8
background_color: "#e8e7ec"
